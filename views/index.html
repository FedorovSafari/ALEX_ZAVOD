<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система заявок на ремонт станков</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<header>
    <div class="header-container">
        <div class="logo">Ремонт станков</div>
        <div class="auth-section">
            <span id="userGreeting"></span>
            <span id="authLoader" class="hidden">Загрузка...</span>
            <span id="authError" class="error-message hidden"></span>
            <a href="/login" id="loginLink">Войти</a>
            <a href="/register" id="registerLink">Регистрация</a>
            <a href="#" id="logoutLink" class="hidden">Выйти</a>
            <a href="/dashboard" id="adminLink" class="hidden">Панель администратора</a>
        </div>
    </div>
</header>

<div class="container">
    <h1>Форма заявки на ремонт станка</h1>
    <form id="repairForm" class="hidden">
        <div class="form-group">
            <label for="machine_name">Название станка:</label>
            <input type="text" id="machine_name" name="machine_name" required>
        </div>

        <div class="form-group">
            <label for="serial_number">Серийный номер:</label>
            <input type="text" id="serial_number" name="serial_number">
        </div>

        <div class="form-group">
            <label for="issue_description">Описание проблемы:</label>
            <textarea id="issue_description" name="issue_description" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label for="urgency_level">Срочность:</label>
            <select id="urgency_level" name="urgency_level" required>
                <option value="low">Низкая</option>
                <option value="medium" selected>Средняя</option>
                <option value="high">Высокая</option>
                <option value="critical">Критическая</option>
            </select>
        </div>

        <div class="form-group">
            <label for="contact_name">Ваше имя:</label>
            <input type="text" id="contact_name" name="contact_name" required>
        </div>

        <div class="form-group">
            <label for="contact_phone">Контактный телефон:</label>
            <input type="tel" id="contact_phone" name="contact_phone" required>
        </div>

        <div class="form-group">
            <label for="contact_email">Email (необязательно):</label>
            <input type="email" id="contact_email" name="contact_email">
        </div>

        <button type="submit" class="submit-btn">Отправить заявку</button>
    </form>

    <div id="loginPrompt" class="info-message">
        <p>Для подачи заявки необходимо <a href="/login">войти в систему</a> или <a href="/register">зарегистрироваться</a>.</p>
    </div>

    <div id="successMessage" class="success-message hidden">
        Заявка успешно отправлена! Номер вашей заявки: <span id="requestId"></span>
    </div>
</div>

<script src="/js/auth.js"></script>
<script src="/js/form.js"></script>
</body>
</html>